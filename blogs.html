<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="assets/headerStyle.css">
    <link rel="stylesheet" href="assets/html.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
    <title>ComiCommerce | Blogs</title>
</head>
<body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
    <header>
        <nav>
            <div class="headerContainer">
                <div style="width: 50%; text-align: left;">
                    <h4>ComiCommerce</h4>
                </div>
                <div id="cartButton" style="width: 50%; text-align: right;">
                    <a href="shoppingCart.html" class="button" style="padding: 10px 15px;">Carrito</a>
                </div>
            </div>
            <div class="headerContainer" style="background-color: rgb(255, 67, 67); justify-content: center; margin: 5px;">
                <div id="headerButtons">
                    <a href="index.html">Home</a>
                    <p>___</p>
                    <a href="catalog.html">Productos</a>
                    <p>___</p>
                    <a href="aboutUs.html">Nosotros</a>
                    <p>___</p>
                    <a href="blogs.html">Blogs</a>
                    <p>___</p>
                    <a href="contact.html">Contacto</a>
                </div>
            </div>
        </nav>
    </header>
    <main class="container mt-4 mb-4">
        <h1 class="text-center mb-4">Blog de ComiCommerce</h1>
        <div class="row mb-5">
            <div class="col-lg-8">
                <div id="blogsList" class="row g-4"></div>
            </div>
            <div class="col-lg-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Crear nuevo blog</h5>
                        <form id="newBlogForm">
                            <div class="mb-3">
                                <label for="blogTitulo" class="form-label">Título</label>
                                <input type="text" class="form-control" id="blogTitulo" required>
                            </div>
                            <div class="mb-3">
                                <label for="blogDescripcion" class="form-label">Descripción breve</label>
                                <input type="text" class="form-control" id="blogDescripcion" required>
                            </div>
                            <div class="mb-3">
                                <label for="blogContenido" class="form-label">Contenido</label>
                                <textarea class="form-control" id="blogContenido" rows="4" required></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary w-100">Publicar blog</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <footer class="mt-5">
        <nav>
            <div class="headerContainer" style="background-color: rgb(255, 67, 67); justify-content: center; margin: 5px;">
                <div id="footerButtons">
                    <a href="index.html">Home</a>
                    <a href="catalog.html">Productos</a>
                    <a href="aboutUs.html">Nosotros</a>
                    <a href="blogs.html">Blogs</a>
                    <a href="contact.html">Contacto</a>
                </div>
            </div>
            <div class="text-center py-3">&copy; 2025 ComiCommerce</div>
        </nav>
    </footer>
    <script src="scripts/countProducts.js"></script>
    <script>
    function getBlogs() {
        return JSON.parse(localStorage.getItem('blogs')) || [];
    }
    function saveBlogs(blogs) {
        localStorage.setItem('blogs', JSON.stringify(blogs));
    }
    function renderBlogs() {
        const blogs = getBlogs();
        const container = document.getElementById('blogsList');
        if (blogs.length === 0) {
            container.innerHTML = '<div class="col-12"><div class="alert alert-info">No hay blogs publicados aún.</div></div>';
            return;
        }
        let html = '';
        blogs.slice().reverse().forEach(blog => {
            html += `
            <div class="col-md-6">
                <div class="card h-100">
                    <div class="card-body">
                        <h5 class="card-title">${blog.titulo}</h5>
                        <h6 class="card-subtitle mb-2 text-muted">${blog.fecha}</h6>
                        <p class="card-text">${blog.descripcion}</p>
                        <a href="blog.html?id=${blog.id}" class="btn btn-primary">Leer más</a>
                    </div>
                </div>
            </div>
            `;
        });
        container.innerHTML = html;
    }
    document.getElementById('newBlogForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const titulo = document.getElementById('blogTitulo').value.trim();
        const descripcion = document.getElementById('blogDescripcion').value.trim();
        const contenido = document.getElementById('blogContenido').value.trim();
        if (titulo && descripcion && contenido) {
            const blogs = getBlogs();
            const id = Date.now();
            const fecha = new Date().toLocaleDateString('es-CL', { day: 'numeric', month: 'long', year: 'numeric' });
            blogs.push({ id, titulo, descripcion, contenido, fecha });
            saveBlogs(blogs);
            renderBlogs();
            this.reset();
        }
    });
    renderBlogs();
    </script>
</body>
</html>